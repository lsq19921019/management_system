<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>小鸽理财-新用户注册</title>
    <!--#include virtual="_inc/_inc_import_css.html" -->
    <!--#include virtual="_inc/_inc_import_js.html" -->
</head>

<body id="june-promo" id="maodian">
    <div class="header">
        <div class="inner">
            <div class="left">
                <div class="logo" id="indexLogo"></div><span class="logoPart">2018胡润新金融最具潜力企业</span>
            </div>
            <div class="right">
                <p class="phone"><img src="../img/june_promotion_01.png">400-700-4007</p>
            </div>
            <div class="clear"></div>
        </div>
    </div>

    <div class="banner">
        <div class="inner">
            <div id="bannerBox">
                <div class="tit">合规平台，已接入上海银行存管</div>
                <div class="form">
                    <ul>
                        <li>
                            <input type="text" id="phoneNumber" maxlength="11" placeholder="请输入手机号" />
                        </li>
                        <li>
                            <input id="password" type="password" maxlength="20" placeholder="请设置密码" />
                        </li>
                        <li>
                            <div class="fl">
                                <input id="photoCode" type="text" maxlength="4" placeholder="验证码" />
                            </div>
                            <div class="fr">
                                <img id="imgCode" src="" />
                            </div>
                        </li>
                        <li style="padding-bottom:0;">
                            <div class="fl">
                                <input id="validateCode" type="text" maxlength="4" placeholder="请输入短信验证码" />
                            </div>
                            <div class="fr">
                                <a id="validateCodeBth" class="getCode" href="javascript:;">获取验证码</a>
                            </div>
                        </li>
                    </ul>
                </div>
                <p class="register_tips" id="registerTips"></p>
                <div class="btn">
                    <button id="registerBtn">注册领取888红包</button>
                </div>
                <div class="go-login">
                    <a href="index_login.html">已有账户? 立即登录</a>
                </div>
            </div>
        </div>
    </div>

    <div class="novice">
        <p class="title">新手专享<i></i></p>
        <div class="novice_con">
            <div class="content">
                <i><img src="../img/june_promotion_46.png"></i>
                <ul>
                    <li class="one">
                        <p class="top">
                            8%<span class="orange"><span class="small1">+</span>7%</span>
                        </p>
                        <p class="desc">往期年化收益</p>
                        <div>注册即领取888元红包</div>
                    </li>
                    <li class="two">
                        <p class="top">
                            40<span class="small">天</span>
                        </p>
                        <p class="desc">项目期限</p>
                    </li>
                    <li class="three">
                        <p class="top">
                            100<span class="small">元</span>
                        </p>
                        <p class="desc">起投金额</p>
                        <div><a href="javascript:;" class="goReg">立即加入</a></div>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div class="advantage">
        <p class="title">品牌实力<i></i></p>
        <div class="advantage-line">
            <div class="left-line">
                <img src="../img/june_promotion_09.png">
                <p>收益领先
                    <br><span>往期年化收益：8～15%<br>新手注册888元红包</span></p>
                <div class="clear"></div>
            </div>
            <div class="right-line">
                <img src="../img/june_promotion_10.png">
                <p>安全合规
                    <br><span>上海银行资金存管<br>优质授信资料</span></p>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="advantage-line">
            <div class="left-line">
                <img src="../img/june_promotion_11.png">
                <p>投资安全
                    <br><span>真实借款人信息<br>征信与资产真实性双重审核定价</span></p>
                <div class="clear"></div>
            </div>
            <div class="right-line">
                <img src="../img/june_promotion_12.png">
                <p>投资保障
                    <br><span>企业信用评级AAA级信用企业<br>国家ICP许可证及增值电信业务许可证</span></p>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <div class="advantage-line">
            <div class="left-line">
                <img src="../img/june_promotion_13.png">
                <p>品牌荣誉
                    <br><span>2018年胡润新金融最具潜力企业<br>深圳市互联网金融商会会员单位</span></p>
                <div class="clear"></div>
            </div>
            <div class="right-line">
                <img src="../img/june_promotion_14.png">
                <p>技术保障
                    <br><span>百度人脸识别<br>央行及8大征信机构验核体系</span></p>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <!-- <div class="further-line"><a href="/index.html" class="further">进一步了解 ></a></div> -->
    </div>
     
    <div class="plan-box">
        <p class="title">产品多样<i></i></p>
        <div class="plan-s left">
            <p class="title">权益专享</p>
            <p class="rate" style="color:#ffa840;">8%+7%</p>
            <p class="foot-title">往期年化收益 | 1000元起投</p>
            <div class="btn">
                <img src="../img/june_promotion_06.png" class="goReg">
            </div>
        </div>
        <div class="plan-l">
            <p class="title">新手专享</p>
            <p class="rate">8%+7%</p>
            <p class="foot-title">往期年化收益 | 100元起投</p>
            <div class="btn">
                <img src="../img/june_promotion_07.png" class="goReg">
            </div>
        </div>
        <div class="plan-s right">
            <p class="title">期限灵活</p>
            <p class="rate" style="color:#ffa840;">8%~13%</p>
            <p class="foot-title">往期年化收益 | 1000元起投</p>
            <div class="btn">
                <img src="../img/june_promotion_06.png" class="goReg">
            </div>
        </div>
    </div>    

    <div class="footer-text">
        <div class="inner">
            <p class="title">小鸽理财<i></i></p>
            <p class="text">小鸽理财成立于2013年12月，是一家网络借贷信息中介服务平台，由深圳市温馨港湾网络技术有限公司运营。实缴资本5000万元，平台由银行系核心团队管理，专注于优质小额资产，且拥有领先技术风控经验。通过百度人脸识别技术、央行等8大征信几个验核体系等29道风控程序，多重交叉审核，多维度确保标的资产安全可控。
            <p class="text">小鸽秉承规范、安全、透明、诚信的经营准则，属于合规经营的第一梯队。平台率先获国家ICP许可证及增值电信业务许可证、上海银行资金存管系统、e签宝电子签章、通过“国家信息安全等级保护三级”认证、AAA级信用认证，跻身行业合规前列。</p>
            </p>
        </div>
    </div>
    <div class="footer-icon">
        <p class="copyright">copyright©2016-2017 深圳市温馨港湾网络技术有限公司 版权所有
            <br> ICP备案
            <a href="http://www.miit.gov.cn">粤ICP备14025100号</a>理财有风险 投资需谨慎
        </p>
        <div class="icon-line">
            <!--可信网站图片LOGO安装开始-->
            <script src="https://kxlogo.knet.cn/seallogo.dll?sn=e17081144030068573cqng000000&size=0"></script>
            <!--可信网站图片LOGO安装结束-->
            <script language="javascript" type="text/javascript" src="https://seal.wosign.com/tws.js"></script>
            <!-- <div class="bottomSafe">
                <a href="http://www.gdnet110.gov.cn/" target="_blank"></a>
            </div> -->
            <div class="bottomIcp">
                <a href="http://www.miit.gov.cn" target="_blank"></a>
            </div>
        </div>
    </div>
    <script type="text/javascript">
    $(function() {
        $(".goReg").on('click', function(event) {
            $('html , body').animate({ scrollTop: 0 }, 'slow');
        });
        $("#indexLogo").on('click', function(event) {
            location.href = "/index.html"
        });
    })
    var regData = {
        type: base.GetQueryString("type"),
    }
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?b7f00304029723fca4fc0f1946ce8012";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();

    //注册
    var Register = {
        //信息完整
        infoComplate : false,
        sourceType: base.GetQueryString("type"),
        //方法
        fncs : {
            //获取图片验证码
            requestImgFunc: function(number) {
                var phoneNumber = number || '15888888888';
                if (!Utils.checkLogin()) {
                    $.ajax({
                        type: "POST",
                        headers: {
                            "clientType": base.dataWithoutToken.clientType,
                            "clientVersion": base.dataWithoutToken.clientVersion,
                            "timeStamp": base.dataWithoutToken.timeStamp,
                            "sign": base.getPostStrWithoutToken({
                                cellphone: phoneNumber
                            }),
                            "imei": base.dataWithoutToken.timeStamp
                        },
                        data: {
                            cellphone: phoneNumber
                        },
                        dataType: 'json',
                        async: false,
                        url: '/api/img/code',
                        success: function(data) {
                            if (data.status == 0) {
                                $('img#imgCode').attr('src', 'data:image/png;base64,' + data.result);
                            }
                        }
                    });
                }
            },
            //获取短信验证码
            requestSmsFunc: function(photoCode, phoneNumber) {
                if (!photoCode) return;
                if (!phoneNumber) return;
                var timer;
                var jsonData = {
                    imgCode: photoCode,
                    cellphone: phoneNumber,
                    type: 1,
                };
                $.ajax({
                    type: "POST",
                    headers: {
                        "clientType": base.dataWithoutToken.clientType,
                        "clientVersion": base.dataWithoutToken.clientVersion,
                        "sign": base.getPostStrWithoutToken(jsonData),
                        "imei": base.dataWithoutToken.timeStamp,
                        "timeStamp": base.dataWithoutToken.timeStamp,
                    },
                    data: jsonData,
                    dataType: 'json',
                    async: false,
                    url: '/api/sms/register',
                    success: function(data) {
                        if (data.status == 0) {
                            $('#registerTips').html('');
                            Register.infoComplate = true;
                            var i = 60;
                            var timer = setInterval(function() {
                                $('#validateCodeBth').attr('disabled', true);
                                $('#validateCodeBth').html(i + 's');
                                if (i == 0) {
                                    clearInterval(timer);
                                    $('#validateCodeBth').attr('disabled', false);
                                    $('#validateCodeBth').html('重新发送');
                                }
                                i--;
                            }, 1000);

                        } else {
                            $('#registerTips').html(data.msg);
                            Register.fncs.requestImgFunc($('input#phoneNumber').val());
                        }
                    }
                });
            },
            //注册
            registerFunc: function(cellphone, messageCode, password, referrer) {
                var dataJson = {
                    'cellphone': cellphone,
                    'code': messageCode,
                    'password': password,
                    'sourceType': Register.sourceType
                };
                if (referrer) {
                    dataJson.referrer = referrer
                };
                var register = DES3.encrypt(base.desKey, JSON.stringify(dataJson));

                $.ajax({
                    type: "POST",
                    headers: {
                        "clientType": base.dataWithoutToken.clientType,
                        "clientVersion": base.dataWithoutToken.clientVersion,
                        "timeStamp": base.dataWithoutToken.timeStamp,
                        "sign": base.getPostStrWithoutToken({
                            register: register
                        }),
                        "imei": base.dataWithoutToken.timeStamp
                    },
                    dataType: 'json',
                    async: false,
                    data: {
                        register: register
                    },
                    url: '/api/user/register',
                    success: function(data) {
                        if (data.status == "0") {
                            var userInfo = {
                                headImg: data.result.headImg,
                                nickName: data.result.nickName,
                                phone: data.result.phone,
                                userName: data.result.userName,
                            };
                            sessionStorage.setItem('userInfo', JSON.stringify(userInfo));
                            localStorage.setItem('token', data.result.token);
                            localStorage.setItem('IMEI', Utils.creatImeiNumber());
                            Web.go('index_displayPage.html');
                        } else {
                            alert(data.msg);
                            Register.fncs.requestImgFunc($('input#phoneNumber').val());
                        }
                    }
                });
            }

        },
        doms : {

        },
        //入口
        init : function() {
            this.fncs.requestImgFunc();
            //键盘enter事件
            Utils.keyboardDownFunc($('#registerBtn'), 13, 'click');
            //图片验证码事件
            $('img#imgCode').on('click', function() {
                Register.fncs.requestImgFunc();
            });
            //密码判断
            $('#password').blur(function() {
                var self = this;
                var errorPart;
                if (!Utils.checkPassword($(self).val())) {
                    Register.infoComplate = false;
                    errorPart = $(self).val() ? '* 密码输入错误 , 请重新输入' : '';
                } else {
                    Register.infoComplate = true;
                    errorPart = '';
                }
                $('#registerTips').html(errorPart);
            });
            //手机号码判断
            $('input#phoneNumber').blur(function() {
                var self = this;
                var errorPart;
                if (!Utils.checkPhone($(self).val())) {
                    Register.infoComplate = false;
                    errorPart = $(self).val() ? '* 手机号输入错误 , 请重新输入' : '';
                } else {
                    Register.infoComplate = true;
                    Register.fncs.requestImgFunc($(self).val());
                }
                $('#registerTips').html(errorPart);
            });
            //短信验证码按钮点击
            $('#validateCodeBth').on('click', function() {
                var self = this;
                var errorPart;
                if (Utils.checkPhone($('input#phoneNumber').val()) && Utils.checkPassword($('input#password').val()) && $('input#photoCode').val().length == 4) {
                    //输入正确
                    Register.infoComplate = true;
                    if (!Utils.checkLogin()) {
                        Register.fncs.requestSmsFunc($('input#photoCode').val(), $('input#phoneNumber').val());
                    }

                } else {
                    //输入错误
                    Register.infoComplate = false;
                    errorPart = '* 上面信息填写错误,请重新输入';
                    $('#registerTips').html(errorPart);
                }
            });
            
            //注册按钮点击事件
            $('#registerBtn').on('click', function() {
                if (!Utils.checkLogin() && Register.infoComplate) {
                    Register.fncs.registerFunc($('input#phoneNumber').val(), $('input#validateCode').val(), $('input#password').val(),'');
                } else {
                    $('#registerTips').html('请完整填写注册信息');
                }
            });


        }
    };
    Register.init();
    </script>
</body>

</html>