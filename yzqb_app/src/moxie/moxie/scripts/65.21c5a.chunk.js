webpackJsonp([65],{807:function(e,t,a){try{(function(){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=function(e,t,a){for(var r=!0;r;){var n=e,l=t,i=a;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,l);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(i)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=i,r=!0,o=u=void 0}},s=a(2),u=r(s),f=a(6),c=r(f),m=a(7),d=r(m),h=a(18),p=r(h),v=a(11),y=r(v),b=a(10),E=r(b),g=a(1),P=a(9),w=r(P),T=a(8),N=(a(39),a(12)),O=r(N),k=function(e){function t(e,a){n(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,a),this.renderEmails=this.renderEmails.bind(this),this.handleNext=this.handleNext.bind(this),this.state={emails:[],fail:!1,frontConf:O.default.frontConf[O.default.taskType]}}return l(t,e),i(t,null,[{key:"contextTypes",value:{history:s.PropTypes.history},enumerable:!0}]),i(t,[{key:"componentDidMount",value:function(){var e=this;PG.refreshTitle("选择邮箱"),(0,T.fetchList)({taskType:"email"}).then(function(t){return e.setState({emails:t})}).catch(function(t){return e.setState({fail:!0})})}},{key:"render",value:function(){var e=this,t=this.renderEmails,a=(g.qsParams.agreementEntryText&&"undefined"!=g.qsParams.agreementEntryText?g.qsParams.agreementEntryText:"同意《用户使用协议》",u.default.createElement(d.default,{onTap:w.default.bind(this,"/emaillist")},u.default.createElement("i",{className:"ion-chevron-left"})),t()||u.default.createElement("div",{className:"centered"},u.default.createElement(y.default,{size:"44",color:"#999"})));return this.state.fail&&(a=u.default.createElement("div",{className:"centered"},"网络异常,请稍后再试")),u.default.createElement("div",null,"NO"==g.qsParams.showTitleBar||0==g.qsParams.showTitleBar||PG.Device.SDK?null:u.default.createElement("div",{style:{height:"NO"==g.qsParams.showTitleBar||PG.Device.SDK?0:44}},u.default.createElement(c.default,{title:"选择邮箱",left:u.default.createElement(d.default,{onTap:function(){w.default.call(e)}},u.default.createElement("i",{className:"ion-chevron-left"}))})),u.default.createElement("div",{className:"mx-view bank-list-page",style:{top:"NO"==g.qsParams.showTitleBar||0==g.qsParams.showTitleBar||PG.Device.SDK?0:44}},u.default.createElement(p.default,null,a)))}},{key:"renderEmails",value:function(){var e=this,t=this.state.emails;if(this.handleNext,0===t.length)return null;var a="0"!=this.state.frontConf.filterList?JSON.parse(this.state.frontConf.filterList):[];return u.default.createElement("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"scroll",WebkitOverflowScrolling:"touch"}},u.default.createElement("ul",{style:{backgroundColor:"white"}},t.filter(function(e,t){if(a)for(var r=0;r<a.length;r++)if(e.host==a[r])return!1;return!0}).map(function(t,a){return u.default.createElement("li",{key:a},u.default.createElement(E.default,{onTap:function(){e.handleNext(t)}},u.default.createElement("div",{className:"bank-item"},u.default.createElement("div",{style:{backgroundImage:"url("+t.items.logo+")"},className:"email-icon"}),u.default.createElement("span",{className:"icon-arrow"},u.default.createElement("i",{className:"ion-ios-arrow-right"})))))})))}},{key:"handleNext",value:function(e){if("1"==e.items.isCanUseWebLogin&&PG.Device.SDK)PG.mxRelogin({taskType:"email",userAgent:e.items.userAgent,loginUrl:e.items.loginUrl,jsUrl:e.items.jsurl,host:e.host,replace:!1});else{var t=this.context.history.pushState;this.state.supportedBanks,t({},"/email",g.qsParams)}}}]),t}(u.default.Component);t.default=k,e.exports=t.default}).call(this)}finally{}}});