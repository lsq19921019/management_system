webpackJsonp([24],{829:function(e,t,a){try{(function(){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e,t,a){for(var n=!0;n;){var r=e,o=t,l=a;n=!1,null===r&&(r=Function.prototype);var i=Object.getOwnPropertyDescriptor(r,o);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(l)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=o,a=l,n=!0,i=c=void 0}},s=a(2),c=n(s),u=a(10),f=n(u),p=a(16),d=a(1),C=a(6),h=n(C),k=a(7),m=n(k),b=a(9),y=n(b),v=a(8),g=(a(409),a(39)),D=a(12),x=n(D),E=/^\d{12,21}$/,w=function(e){function t(e,t){r(this,n),i(Object.getPrototypeOf(n.prototype),"constructor",this).call(this,e,t),this.state={showDialog:!1,showTip:"none",validated:null,configList:x.default.frontConf[x.default.taskType],tips:"请输入正确的银行卡号",themeColor:d.qsParams.themeColor?"#"+d.qsParams.themeColor:"#c11000"}}o(t,e),l(t,[{key:"componentDidMount",value:function(){PG.refreshTitle("个人征信")}},{key:"render",value:function(){var e=this;return c.default.createElement("div",{className:"zx-applyReport zx-new mx-view",style:{background:"#fff"}},"NO"==d.qsParams.showTitleBar||0==d.qsParams.showTitleBar||PG.Device.SDK?null:c.default.createElement("div",{style:{height:"NO"==d.qsParams.showTitleBar||PG.Device.SDK?0:44}},c.default.createElement(h.default,{title:"征信报告查询",left:c.default.createElement(m.default,{onTap:function(){y.default.call(e)}},c.default.createElement("i",{className:"ion-chevron-left"}))})),this.state.showDialog?this.enterBankCard():null,c.default.createElement("div",{style:{borderColor:this.state.themeColor},className:"zx-apply-title"},"提示：获取征信信息查询结果，提交24小时后可查看"),c.default.createElement("p",{style:{color:this.state.themeColor,width:"94%",margin:"25px auto",textIndent:"25px",lineHeight:"25px"},className:"zx-apply-text"},"您可以通过"+("0"==this.state.configList.showZhengxinBankCardVerifition?"问题验证":"问题验证或银行卡验证")+"的方式来查询您的信用报告，提交申请24小时后，在平台获取结果。为保障您的信息安全，您申请的信用信息将于7日后清理，请及时获取查询结果"),c.default.createElement("div",{className:"zx-apply-con-img"},c.default.createElement("img",{src:a(967),alt:""}),c.default.createElement("img",{src:a(966),alt:""})),c.default.createElement("div",{className:"zx-apply_btn"},c.default.createElement(f.default,{onTap:this.applyReport.bind(this)},c.default.createElement("button",{style:{backgroundColor:this.state.themeColor},className:"appyl_btn"},"问题验证查询")),this.state.configList&&"0"!=this.state.configList.showZhengxinBankCardVerifition?c.default.createElement(f.default,{onTap:function(){e.setState({showDialog:!0})}},c.default.createElement("button",{style:{backgroundColor:this.state.themeColor},className:"check_report"},"银行卡验证查询")):null,c.default.createElement(f.default,{onTap:this.checkReport.bind(this)},c.default.createElement("button",{style:{backgroundColor:this.state.themeColor},className:"check_report"},"查看报告"))))}},{key:"applyReport",value:function(){this.context.history.pushState({},"/zhengxinv2/applyReport",d.qsParams)}},{key:"checkReport",value:function(){this.context.history.pushState({},"/zhengxinv2/checkReport",d.qsParams)}},{key:"nextStep",value:function(){var e=this,t=this.refs.bankCard.value;return E.test(t)?0!==this.state.validated&&(this.setState({validated:0}),void(0,v.cardBin)(t).then(function(a){if(a.body){var n=a.body.cardType;e.setState({validated:1}),a.body.validated?(storage.setItem("cardDetail",JSON.stringify({cardNum:t,cardType:n})),e.filterCard(a.body)?(e.setState({showDialog:!1}),e.context.history.pushState({},"/zhengxinv2/bankCardverification",d.qsParams)):e.setState({showTip:"block",tips:"暂不支持该银行！"})):e.setState({showTip:"block",tips:"请输入正确的银行卡号"})}}).catch(function(t){e.setState({showDialog:!1}),console.log(t);var a=t.body?t.body.detail:"网络异常，请稍后再试"+t;PG.alert(a)})):(this.setState({showTip:"block",tips:"请输入正确的银行卡号"}),!1)}},{key:"enterBankCard",value:function(){var e=this;return c.default.createElement("div",{className:"bankCardVerification"},c.default.createElement("div",null,c.default.createElement("input",{ref:"bankCard",type:"text",placeholder:"请输入银行卡号"}),c.default.createElement("p",{style:{display:this.state.showTip,color:"#f00",fontSize:"12px"}},this.state.tips),c.default.createElement("div",null,c.default.createElement(f.default,{onTap:function(){e.setState({showDialog:!1,showTip:"none"})}},c.default.createElement("span",null," 取消")),c.default.createElement(f.default,{onTap:this.nextStep.bind(this)},c.default.createElement("span",{style:{color:this.state.themeColor}},"下一步")))))}},{key:"filterCard",value:function(e){var t=[{bankMark:"ICBC",CC:!0,DC:!0},{bankMark:"ABC",CC:!0,DC:!0},{bankMark:"BOC",CC:!0,DC:!0},{bankMark:"CCB",CC:!0,DC:!0},{bankMark:"COMM",CC:!0,DC:!0},{bankMark:"CMB",CC:!0,DC:!1},{bankMark:"CEB",CC:!0,DC:!0},{bankMark:"CIB",CC:!0,DC:!0},{bankMark:"SPDB",CC:!0,DC:!0},{bankMark:"SPABANK",CC:!0,DC:!0},{bankMark:"HXBANK",CC:!0,DC:!0},{bankMark:"CITIC",CC:!0,DC:!0},{bankMark:"PSBC",CC:!1,DC:!0},{bankMark:"CMBC",CC:!0,DC:!1},{bankMark:"GDB",CC:!0,DC:!0},{bankMark:"BOHAIB",CC:!0,DC:!0},{bankMark:"SHBANK",CC:!0,DC:!0},{bankMark:"BJBANK",CC:!0,DC:!0}],a=!1;return t.map(function(t){t.bankMark==e.bank&&t[e.cardType]&&(a=!0)}),a}}]);var n=t;return t=(0,g.observer)(t)||t}(c.default.Component);t.default=w,w.contextTypes={history:p.PropTypes.history},e.exports=w,e.exports=t.default}).call(this)}finally{}},966:function(e,t,a){e.exports=a.p+"assets/0f3494b9.paper.jpg"},967:function(e,t,a){e.exports=a.p+"assets/57b5e25f.pen.jpg"}});